!function(e){"use strict";e(function(){var s=e(".es-search__wrapper"),t=e(".es-request-widget-wrap form"),a=e(".es-response-block"),i=e(".es-select2-tags"),r=e(".js-es-select2-base");i.length&&i.select2({tags:!0}),r.length&&r.select2(),s.find("select:not(.es-select2-tags)").select2(),t.on("submit",function(){var s=e(this).serialize(),t=e(this);return e.post(Estatik.ajaxurl,s,function(e){e=JSON.parse(e),a.html(e),t.hide()}),!1}),e(document).on("click",".js-es-request-form-show",function(){t.show(),"undefined"!=typeof grecaptcha&&grecaptcha.reset(),a.html(""),t.find("input[type=text], input[type=tel], input[type=email], textarea").val("")}),s.find("input[type=reset]").click(function(){var s=e(this).closest("form");s.find(".es-search__field").find("input, select").val(null).attr("value","").attr("data-value","").trigger("change");var t=s.find(".es-select2-tags");t.length&&(t.select2("val",""),t.select2("data",null),t.find("option").removeProp("selected").removeAttr("selected"))}),e(".js-trigger-upload").click(function(){return e(e(this).data("selector")).trigger("click"),!1}),e(".js-es-input-image").change(function(){var s=this,t=new FileReader;t.onload=function(t){e(s).closest("div").find(".js-es-image").html("<img src='"+t.target.result+"'>")},t.readAsDataURL(s.files[0]),e(".js-trigger-upload span").html(Estatik.tr.replace_photo)}),e(".js-autocomplete-wrap input").keyup(function(){var s=e(this),t=e(this).data("action");e.post(Estatik.ajaxurl,{action:t,nonce:Estatik.settings.front_nonce,s:e(this).val()},function(e){s.closest(".js-autocomplete-wrap").find(".es-autocomplete-result").html(e)})}),e(".js-autocomplete-wrap").on("click","li",function(){var s=e(this),t=s.closest(".js-autocomplete-wrap");t.find("input").val(s.data("content")),t.find(".es-autocomplete-result").html("")}),e(".es-recaptcha-wrapper .g-recaptcha").each(function(){if(!e(this).closest(".contact-block__send-form-wrapper").length){var s=e(this),t=s.parent().innerWidth()/304;s.css("transform","scale("+t+")"),s.css("transform-origin","0 0"),setTimeout(function(){s.parent().height(s[0].getBoundingClientRect().height)},600)}}),e(document).on("click",".js-es-wishlist-button",function(){var s=e(this);if(s.removeClass("error"),!s.hasClass("preload")){var t=s.data();t.action="es_wishlist_"+t.method,t.nonce=Estatik.settings.wishlist_nonce,s.addClass("preload");var a=s.closest("#es-saved-homes"),i=s.closest("li.properties");e.post(Estatik.ajaxurl,t,function(t){"success"===(t=t||{}).status?(e(s).replaceWith(t.data),a.length&&i.fadeOut(400,function(){i.remove()})):(s.addClass("error"),t.message&&alert(t.message))},"json").always(function(){s.removeClass("preload")}).fail(function(){s.addClass("error")})}return!1}),e(".js-es-save-search").click(function(){var s=e(this),t=s.closest("form");s.val();s.val(Estatik.tr.saving);var a=new FormData(t[0]);a.append("action","es_save_search"),a.append("nonce",Estatik.settings.save_search_nonce),s.hasClass("es-button-green-corner")||s.addClass("es-button-green-corner"),t.find(".js-es-search__messages").html(""),e.ajax({url:Estatik.ajaxurl,type:"POST",data:a,dataType:"json",processData:!1,contentType:!1,success:function(e){"success"===(e=e||{}).status?s.val(Estatik.tr.saved):"error"===e.status&&(s.val(Estatik.tr.error),s.removeClass("es-button-green-corner").addClass("es-button-error")),e.message&&t.find(".js-es-search__messages").html(e.message)}}).always(function(){}).fail(function(){s.val(Estatik.tr.error),s.removeClass("es-button-green-corner").addClass("es-button-error")})}),e(".js-es-change-update-method").change(function(){var s=e(this).closest("form").find(".es-msg-container");s.html("");var t={action:"es_change_update_method",nonce:Estatik.settings.save_search_change_method_nonce,id:e(this).data("id"),update_method:e(this).val()};e.post(Estatik.ajaxurl,t,function(e){(e=e||{}).message&&("success"===e.status?e.message='<p class="es-message es-message-success"><i class="fa fa-check-circle-o" aria-hidden="true"></i> '+e.message+"</p>":e.message='<p class="es-message es-message-error"><i class="fa fa-times-circle-o" aria-hidden="true"></i> '+e.message+"</p>",s.html(e.message))},"json").fail(function(){alert(Estatik.tr.system_error)})}),e(".js-es-login-form").click(function(){return e.get(Estatik.ajaxurl,{action:"es_login_form",nonce:Estatik.settings.front_nonce},function(s){e.magnificPopup.open({items:{src:s,type:"inline"}})}).fail(function(){alert(Estatik.tr.system_error)}),!1});var n=e(".es-profile__wrapper--horizontal"),c=e(".es-profile__wrapper--horizontal .es-profile__tabs-wrapper");e(window).on("resize",function(){var s=0;c.find("li").each(function(){s+=e(this).outerWidth()}),c.find("ul").hasClass("slick-initialized")&&c.find("ul").slick("unslick"),n.width()<s&&c.find("ul").slick({variableWidth:!0,prevArrow:'<i class="fa fa-angle-left" aria-hidden="true"></i>',nextArrow:'<i class="fa fa-angle-right" aria-hidden="true"></i>'})}).trigger("resize"),e(".js-switch-block").click(function(){var s=e(e(this).data("block"));return s.hasClass("hidden")?s.removeClass("hidden"):s.addClass("hidden"),!1}),e(".js-saved-search-save").click(function(){var s=e(this).closest(".es-saved-search__item"),t=s.find(".es-msg-container");return e.post(Estatik.ajaxurl,e(this).closest("form").serialize(),function(e){(e=e||{}).message&&("success"===e.status?(e.message='<p class="es-message es-message-success"><i class="fa fa-check-circle-o" aria-hidden="true"></i> '+e.message+"</p>",s.find(".js-saved-search-title").html(e.title)):e.message='<p class="es-message es-message-error"><i class="fa fa-times-circle-o" aria-hidden="true"></i> '+e.message+"</p>",t.html(e.message))},"json").fail(function(){alert(Estatik.tr.system_error)}).always(function(){s.find(".js-switch-block").trigger("click")}),!1})})}(jQuery);